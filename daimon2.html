<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>都立数学特訓 - 大問2規則性</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px; background: #f0f4f8; }
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .visualizer { background: #eee; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; min-height: 150px; }
        .tile-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 5px; max-width: 300px; margin: auto; }
        .tile { width: 30px; height: 30px; background: #007AFF; border: 1px solid #fff; border-radius: 4px; animation: pop 0.3s ease; }
        .tile.highlight { background: #FF9500; }
        @keyframes pop { 0% { transform: scale(0); } 100% { transform: scale(1); } }
        .control-panel { margin: 20px 0; padding: 15px; background: #fff; border: 1px solid #ddd; border-radius: 10px; }
        input[type="range"] { width: 100%; margin: 10px 0; }
        .prob-box { font-size: 1.1em; line-height: 1.6; margin-bottom: 20px; }
        .action-btn { width: 100%; padding: 15px; font-size: 18px; border-radius: 12px; border: none; background: #34C759; color: white; cursor: pointer; font-weight: bold; }
        .ans-box { display: none; margin-top: 20px; padding: 15px; background: #fff9e6; border-radius: 10px; border: 2px solid #FF9500; }
    </style>
</head>
<body>

<div class="card">
    <h2 style="text-align:center; color:#333;">第2問：規則性の攻略</h2>
    
    <div class="prob-box" id="question">
        【例題】1辺に $n$ 個ずつタイルを並べて正方形を作るとき、全体の枚数 $S$ を $n$ を用いて表しなさい。
    </div>

    <div class="control-panel">
        <label>図形の段階 ($n$): <span id="n-val" style="font-weight:bold; color:#007AFF;">3</span></label>
        <input type="range" id="n-slider" min="1" max="6" value="3" oninput="updateVisualizer()">
    </div>

    <div class="visualizer" id="viz">
        </div>

    <button class="action-btn" onclick="showAnswer()">考え方と答えを見る</button>

    <div id="ans-area" class="ans-box">
        <div style="font-weight:bold; color:#FF9500;">答え：$S = 4n - 4$ (または $4(n-1)$)</div>
        <p style="font-size: 0.9em; color:#555;">
            【ポイント】<br>
            4つの角が重なっていることに注目します。1辺を $(n-1)$ 枚として4セットあると考えると、式が立てやすくなります！
        </p>
    </div>
</div>

<script>
    function updateVisualizer() {
        const n = document.getElementById('n-slider').value;
        document.getElementById('n-val').innerText = n;
        const viz = document.getElementById('viz');
        viz.innerHTML = '';
        
        const container = document.createElement('div');
        container.className = 'tile-container';
        container.style.width = (n * 35) + 'px';

        // 簡易的な正方形タイルのシミュレーション
        for (let i = 0; i < n * n; i++) {
            const row = Math.floor(i / n);
            const col = i % n;
            // 外枠だけ描画
            if (row === 0 || row === n-1 || col === 0 || col === n-1) {
                const tile = document.createElement('div');
                tile.className = 'tile';
                container.appendChild(tile);
            }
        }
        viz.appendChild(container);
    }

    function showAnswer() {
        document.getElementById('ans-area').style.display = 'block';
    }

    // 初回読み込み
    updateVisualizer();
</script>

<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</body>
</html>
