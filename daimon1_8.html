<!DOCTYPE html>
<html lang="ja">
<head>
    <script src="auth.js"></script>
    <meta charset="UTF-8">
    <title>都立数学特訓 - 大問1(8) 確率・統計</title>
    <script>window.MathJax = { tex: { inlineMath: [['$', '$']] } };</script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px; background: #fdf6e3; }
        .back-link { text-decoration: none; color: #268bd2; font-weight: bold; }
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; }
        .prob-text { font-size: 1.2rem; margin: 30px 0; min-height: 80px; color: #073642; line-height: 1.6; text-align: left; }
        .action-btn { width: 100%; padding: 15px; font-size: 18px; border-radius: 12px; border: none; background: #268bd2; color: white; cursor: pointer; font-weight: bold; margin-bottom: 10px; }
        .ans-box { display: none; margin-top: 20px; padding: 20px; background: #eee8d5; border-radius: 10px; border: 2px solid #268bd2; }
        .step { text-align: left; font-size: 0.9rem; color: #555; margin-top: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9em; }
        table, th, td { border: 1px solid #93a1a1; padding: 8px; text-align: center; }
        th { background: #eee8d5; }
    </style>
</head>
<body>

<a href="daimon1.html" class="back-link">← 大問1メニューへ</a>

<div class="card">
    <div id="prob-text" class="prob-text">読み込み中...</div>
    <button class="action-btn" onclick="showAnswer()">答えを表示</button>
    <button class="action-btn" style="background:#859900;" onclick="nextProblem()">次の問題</button>

    <div id="ans-area" class="ans-box">
        <div id="ans-text" style="font-size: 1.4rem; font-weight: bold; color: #d33682; margin-bottom: 10px;"></div>
        <div id="exp-text" class="step"></div>
    </div>
</div>

<script>
    const database = [
        { 
            q: String.raw`大小2つのサイコロを同時に投げるとき、出る目の数の和が $5$ になる確率を求めなさい。ただし、どの目が出ることも同様に確からしいものとする。`, 
            a: String.raw`$\frac{1}{9}$`, 
            e: String.raw`全ての出方は $6 \times 6 = 36$ 通り。和が5になる組み合わせは、$(1,4), (2,3), (3,2), (4,1)$ の 4通り。よって $\frac{4}{36} = \frac{1}{9}$ です。` 
        },
        { 
            q: String.raw`袋の中に $1, 2, 3, 4$ の数字が書かれたカードが1枚ずつ入っている。この袋から同時に2枚のカードを取り出すとき、書かれた数字の積が偶数になる確率を求めなさい。`, 
            a: String.raw`$\frac{5}{6}$`, 
            e: String.raw`2枚の取り出し方は $\{1,2\}, \{1,3\}, \{1,4\}, \{2,3\}, \{2,4\}, \{3,4\}$ の計6通り。積が奇数になるのは $\{1,3\}$ のみの 1通り。よって偶数になるのは $6 - 1 = 5$ 通りなので、$\frac{5}{6}$ です。` 
        },
        { 
            q: String.raw`下の表は、あるクラスの生徒20人が受けた小テストの結果である。このデータの「中央値（メジアン）」が含まれる点数を求めなさい。
                <table><tr><th>点数</th><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td></tr>
                <tr><th>人数</th><td>2</td><td>3</td><td>6</td><td>5</td><td>4</td></tr></table>`, 
            a: String.raw`$3$ 点`, 
            e: String.raw`生徒数が20人なので、中央値は10番目と11番目の生徒の平均になります。点数の低い方から数えると、2点までで $2+3=5$ 人。3点までで $5+6=11$ 人となります。したがって、10番目も11番目も「3点」のグループに含まれます。` 
        },
        { 
            q: String.raw`1から6までの目があるサイコロを投げるとき、3以上の目が出る確率を求めなさい。`, 
            a: String.raw`$\frac{2}{3}$`, 
            e: String.raw`3以上の目は $3, 4, 5, 6$ の 4通り。全6通りなので、 $\frac{4}{6} = \frac{2}{3}$ です。` 
        }
    ];

    let currentProb = null;

    function nextProblem() {
        const isUnlocked = AuthManager.isUnlocked('daimon1_q8');
        let qIndex = isUnlocked ? Math.floor(Math.random() * database.length) : 0;

        currentProb = database[qIndex];
        document.getElementById('prob-text').innerHTML = currentProb.q;
        document.getElementById('ans-area').style.display = 'none';
        if(window.MathJax) MathJax.typesetPromise();
    }

    function showAnswer() {
        document.getElementById('ans-text').innerHTML = "正解：" + currentProb.a;
        document.getElementById('exp-text').innerHTML = "【解説】<br>" + currentProb.e;
        document.getElementById('ans-area').style.display = 'block';
        if(window.MathJax) MathJax.typesetPromise();
    }

    window.onload = nextProblem;
</script>
</body>
</html>
