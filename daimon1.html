<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>都立数学特訓 - 大問1完全版</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css" />
    <script src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$']] },
            chtml: { matchFontHeight: false }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px; background: #fdfdfd; }
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-top: 6px solid #007AFF; }
        .nav-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 20px; }
        .nav-btn { padding: 10px; cursor: pointer; border-radius: 8px; border: 1px solid #ddd; background: #fff; font-weight: bold; font-size: 13px; transition: 0.2s; }
        .nav-btn:hover { background: #f0f7ff; }
        .nav-btn.active { background: #007AFF; color: white; border-color: #007AFF; }
        #prob-text { font-size: 1.25em; line-height: 2; margin: 20px 0; min-height: 80px; }
        .jxgbox { width: 100%; height: 300px; margin: 15px 0; display: none; border-radius: 10px; border: 1px solid #eee; }
        .action-btn { width: 100%; padding: 15px; font-size: 18px; border-radius: 12px; border: none; background: #34C759; color: white; cursor: pointer; font-weight: bold; }
        .ans-box { display: none; margin-top: 20px; padding: 15px; background: #fef4f4; border-radius: 10px; border: 2px solid #ffcccc; }
        .exp-text { font-size: 0.95em; color: #444; line-height: 1.8; margin-top: 10px; background: white; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>

<div style="max-width:600px; margin: 10px auto; text-align: left;">
    <a href="index.html" style="text-decoration:none; color:#007AFF; font-weight:bold;">← メニューに戻る</a>
</div>

<div class="card">
    <h2 style="text-align:center; color:#333; margin-top:0;">都立数学：大問1対策</h2>
    <div class="nav-grid">
        <button class="nav-btn" onclick="select(1, this)">(1)四則</button>
        <button class="nav-btn" onclick="select(2, this)">(2)文字式</button>
        <button class="nav-btn" onclick="select(3, this)">(3)平方根</button>
        <button class="nav-btn" onclick="select(4, this)">(4)1次方程式</button>
        <button class="nav-btn" onclick="select(5, this)">(5)連立方程式</button>
        <button class="nav-btn" onclick="select(6, this)">(6)2次方程式</button>
        <button class="nav-btn" onclick="select(7, this)">(7)確率・資料</button>
        <button class="nav-btn" onclick="select(8, this)">(8)角度・変域</button>
        <button class="nav-btn" onclick="select(9, this)">(9)作図</button>
    </div>

    <div id="prob-text">学習したい項目を選んでください。</div>
    <div id="jxgbox" class="jxgbox"></div>
    <button id="show-btn" class="action-btn" onclick="showAnswer()" style="display:none;">答え合わせ</button>
    
    <div id="ans-area" class="ans-box">
        <div id="ans" style="font-weight:bold; font-size:1.4em; color:#d00; border-bottom:1px solid #ffcccc; padding-bottom:5px;"></div>
        <div id="exp" class="exp-text"></div>
        <button class="action-btn" style="background:#8E8E93; margin-top:15px;" onclick="loadProblem()">次の問題</button>
    </div>
</div>

<script>
let board = null;
let currentIdx = 0;

const database = {
    1: [
        { text: String.raw`$(-4)^2 + 6 \div (-2)$`, ans: String.raw`$13$`, exp: String.raw`$16 + (-3) = 13$` },
        { text: String.raw`$5 - 2 \times (-4)$`, ans: String.raw`$13$`, exp: String.raw`$5 - (-8) = 5 + 8 = 13$` },
        { text: String.raw`$12 \div (-2)^2 - 5$`, ans: String.raw`$-2$`, exp: String.raw`$12 \div 4 - 5 = 3 - 5 = -2$` },
        { text: String.raw`$(-3) \times 7 + 10$`, ans: String.raw`$-11$`, exp: String.raw`$-21 + 10 = -11$` },
        { text: String.raw`$8 - (-3)^2$`, ans: String.raw`$-1$`, exp: String.raw`$8 - 9 = -1$` },
        { text: String.raw`$(-1)^3 \times 5 + 6$`, ans: String.raw`$1$`, exp: String.raw`$-5 + 6 = 1$` },
        { text: String.raw`$10 + 12 \div (-3)$`, ans: String.raw`$6$`, exp: String.raw`$10 - 4 = 6$` },
        { text: String.raw`$(-6)^2 \div 9 - 4$`, ans: String.raw`$0$`, exp: String.raw`$36 \div 9 - 4 = 4 - 4 = 0$` },
        { text: String.raw`$7 - 3 \times 5$`, ans: String.raw`$-8$`, exp: String.raw`$7 - 15 = -8$` },
        { text: String.raw`$(-2) \times (-5) + (-4)$`, ans: String.raw`$6$`, exp: String.raw`$10 - 4 = 6$` }
    ],
    2: [
        { text: String.raw`$3(x - 2y) - 2(2x - y)$`, ans: String.raw`$-x - 4y$`, exp: String.raw`$3x - 6y - 4x + 2y = -x - 4y$` },
        { text: String.raw`$4a + 5b - (2a - b)$`, ans: String.raw`$2a + 6b$`, exp: String.raw`$4a + 5b - 2a + b = 2a + 6b$` },
        { text: String.raw`$\frac{x+y}{2} + \frac{x-y}{3}$`, ans: String.raw`$\frac{5x+y}{6}$`, exp: String.raw`$\frac{3(x+y)+2(x-y)}{6} = \frac{3x+3y+2x-2y}{6}$` },
        { text: String.raw`$-2(3a - b) + 4a$`, ans: String.raw`$-2a + 2b$`, exp: String.raw`$-6a + 2b + 4a = -2a + 2b$` },
        { text: String.raw`$8x^2y \div 4x$`, ans: String.raw`$2xy$`, exp: String.raw`$8 \div 4 = 2, x^2 \div x = x$` },
        { text: String.raw`$5(x-1) - 3(x+2)$`, ans: String.raw`$2x - 11$`, exp: String.raw`$5x - 5 - 3x - 6 = 2x - 11$` },
        { text: String.raw`$12a^2 \div 3a \times 2$`, ans: String.raw`$8a$`, exp: String.raw`$4a \times 2 = 8a$` },
        { text: String.raw`$\frac{1}{3}(6x - 9y) + 4y$`, ans: String.raw`$2x + y$`, exp: String.raw`$2x - 3y + 4y = 2x + y$` },
        { text: String.raw`$(x+3)(x-3) - x^2$`, ans: String.raw`$-9$`, exp: String.raw`$x^2 - 9 - x^2 = -9$` },
        { text: String.raw`$a - 3b - (2a - 3b)$`, ans: String.raw`$-a$`, exp: String.raw`$a - 3b - 2a + 3b = -a$` }
    ],
    3: [
        { text: String.raw`$\sqrt{18} + \sqrt{8}$`, ans: String.raw`$5\sqrt{2}$`, exp: String.raw`$3\sqrt{2} + 2\sqrt{2} = 5\sqrt{2}$` },
        { text: String.raw`$\sqrt{3} \times \sqrt{6}$`, ans: String.raw`$3\sqrt{2}$`, exp: String.raw`$\sqrt{18} = 3\sqrt{2}$` },
        { text: String.raw`$(\sqrt{5}+1)(\sqrt{5}-1)$`, ans: String.raw`$4$`, exp: String.raw`$5 - 1 = 4$` },
        { text: String.raw`$\frac{6}{\sqrt{3}} - \sqrt{3}$`, ans: String.raw`$\sqrt{3}$`, exp: String.raw`$2\sqrt{3} - \sqrt{3} = \sqrt{3}$` },
        { text: String.raw`$\sqrt{20} - \sqrt{5}$`, ans: String.raw`$\sqrt{5}$`, exp: String.raw`$2\sqrt{5} - \sqrt{5} = \sqrt{5}$` },
        { text: String.raw`$(\sqrt{2}+3)^2$`, ans: String.raw`$11 + 6\sqrt{2}$`, exp: String.raw`$2 + 6\sqrt{2} + 9 = 11 + 6\sqrt{2}$` },
        { text: String.raw`$\sqrt{24} \div \sqrt{2}$`, ans: String.raw`$2\sqrt{3}$`, exp: String.raw`$\sqrt{12} = 2\sqrt{3}$` },
        { text: String.raw`$3\sqrt{2} - \sqrt{32}$`, ans: String.raw`$-\sqrt{2}$`, exp: String.raw`$3\sqrt{2} - 4\sqrt{2} = -\sqrt{2}$` },
        { text: String.raw`$\sqrt{7} \times \sqrt{7}$`, ans: String.raw`$7$`, exp: String.raw`平方根の定義より$7$` },
        { text: String.raw`$\frac{\sqrt{48}}{2}$`, ans: String.raw`$2\sqrt{3}$`, exp: String.raw`$\frac{4\sqrt{3}}{2} = 2\sqrt{3}$` }
    ],
    4: [
        { text: String.raw`$4x - 7 = x + 5$`, ans: String.raw`$x = 4$`, exp: String.raw`$3x = 12 \Rightarrow x = 4$` },
        { text: String.raw`$2(x - 3) = 10$`, ans: String.raw`$x = 8$`, exp: String.raw`$2x - 6 = 10 \Rightarrow 2x = 16$` },
        { text: String.raw`$0.3x + 0.8 = 1.4$`, ans: String.raw`$x = 2$`, exp: String.raw`$3x + 8 = 14 \Rightarrow 3x = 6$` },
        { text: String.raw`$\frac{1}{2}x - 3 = 1$`, ans: String.raw`$x = 8$`, exp: String.raw`$\frac{1}{2}x = 4 \Rightarrow x = 8$` },
        { text: String.raw`$5x = 3x - 10$`, ans: String.raw`$x = -5$`, exp: String.raw`$2x = -10 \Rightarrow x = -5$` },
        { text: String.raw`$x + 6 = 4x$`, ans: String.raw`$x = 2$`, exp: String.raw`$3x = 6 \Rightarrow x = 2$` },
        { text: String.raw`$7(x+1) = 3x - 1$`, ans: String.raw`$x = -2$`, exp: String.raw`$7x + 7 = 3x - 1 \Rightarrow 4x = -8$` },
        { text: String.raw`$1.2x = 0.4x + 1.6$`, ans: String.raw`$x = 2$`, exp: String.raw`$12x = 4x + 16 \Rightarrow 8x = 16$` },
        { text: String.raw`$\frac{x}{4} = 5$`, ans: String.raw`$x = 20$`, exp: String.raw`$x = 4 \times 5 = 20$` },
        { text: String.raw`$3x - 1 = 8$`, ans: String.raw`$x = 3$`, exp: String.raw`$3x = 9 \Rightarrow x = 3$` }
    ],
    5: [
        { text: String.raw`$\begin{cases} x+y=5 \\ x-y=1 \end{cases}$`, ans: String.raw`$x=3, y=2$`, exp: String.raw`足して$2x=6$, 引いて$2y=4$` },
        { text: String.raw`$\begin{cases} 2x+y=7 \\ x+y=4 \end{cases}$`, ans: String.raw`$x=3, y=1$`, exp: String.raw`上の式から下の式を引く` },
        { text: String.raw`$\begin{cases} y=x+2 \\ 2x+y=8 \end{cases}$`, ans: String.raw`$x=2, y=4$`, exp: String.raw`代入法：$2x+(x+2)=8 \Rightarrow 3x=6$` },
        { text: String.raw`$\begin{cases} 3x-2y=4 \\ x+y=3 \end{cases}$`, ans: String.raw`$x=2, y=1$`, exp: String.raw`下の式を2倍して足す` },
        { text: String.raw`$\begin{cases} 4x+3y=10 \\ 4x+y=6 \end{cases}$`, ans: String.raw`$x=1, y=2$`, exp: String.raw`引いて$2y=4 \Rightarrow y=2$` },
        { text: String.raw`$\begin{cases} x=3y \\ x+y=8 \end{cases}$`, ans: String.raw`$x=6, y=2$`, exp: String.raw`$3y+y=8 \Rightarrow 4y=8$` },
        { text: String.raw`$\begin{cases} 2x-y=5 \\ 3x+2y=11 \end{cases}$`, ans: String.raw`$x=3, y=1$`, exp: String.raw`上の式を2倍して足す` },
        { text: String.raw`$\begin{cases} x+2y=10 \\ 3x-y=2 \end{cases}$`, ans: String.raw`$x=2, y=4$`, exp: String.raw`下の式を2倍して足す` },
        { text: String.raw`$\begin{cases} y=2x-3 \\ y=x+1 \end{cases}$`, ans: String.raw`$x=4, y=5$`, exp: String.raw`$2x-3 = x+1 \Rightarrow x=4$` },
        { text: String.raw`$\begin{cases} 5x+2y=16 \\ x+y=5 \end{cases}$`, ans: String.raw`$x=2, y=3$`, exp: String.raw`下の式を2倍して引く` }
    ],
    6: [
        { text: String.raw`$x^2 - 5x + 6 = 0$`, ans: String.raw`$x=2, 3$`, exp: String.raw`$(x-2)(x-3)=0$` },
        { text: String.raw`$x^2 + 4x - 5 = 0$`, ans: String.raw`$x=1, -5$`, exp: String.raw`$(x+5)(x-1)=0$` },
        { text: String.raw`$x^2 = 9$`, ans: String.raw`$x=\pm 3$`, exp: String.raw`平方根をとる` },
        { text: String.raw`$x^2 - 6x + 9 = 0$`, ans: String.raw`$x=3$`, exp: String.raw`$(x-3)^2=0$` },
        { text: String.raw`$x^2 + 3x = 0$`, ans: String.raw`$x=0, -3$`, exp: String.raw`$x(x+3)=0$` },
        { text: String.raw`$x^2 + 2x - 1 = 0$`, ans: String.raw`$x=-1 \pm \sqrt{2}$`, exp: String.raw`解の公式を使用` },
        { text: String.raw`$x^2 - 10x + 24 = 0$`, ans: String.raw`$x=4, 6$`, exp: String.raw`$(x-4)(x-6)=0$` },
        { text: String.raw`$2x^2 = 8$`, ans: String.raw`$x=\pm 2$`, exp: String.raw`$x^2=4$` },
        { text: String.raw`$x^2 - 7x + 10 = 0$`, ans: String.raw`$x=2, 5$`, exp: String.raw`$(x-2)(x-5)=0$` },
        { text: String.raw`$x^2 + 5x + 1 = 0$`, ans: String.raw`$x=\frac{-5 \pm \sqrt{21}}{2}$`, exp: String.raw`解の公式を使用` }
    ],
    7: [
        { text: String.raw`サイコロ2つを振る時、和が7になる確率。`, ans: String.raw`$\frac{1}{6}$`, exp: String.raw`(1,6)から(6,1)の6通り。$6/36 = 1/6$` },
        { text: String.raw`10円, 50円, 100円の3枚を振る時、2枚以上表になる確率。`, ans: String.raw`$\frac{1}{2}$`, exp: String.raw`全8通り中、表3枚が1通、表2枚が3通。$4/8 = 1/2$` },
        { text: String.raw`赤玉3白玉2から2個同時に取る時、同じ色になる確率。`, ans: String.raw`$\frac{2}{5}$`, exp: String.raw`全10通り。赤2は3通り、白2は1通り。$4/10 = 2/5$` },
        { text: String.raw`5人のテスト(8, 5, 10, 2, 5)の中央値。`, ans: String.raw`$5$`, exp: String.raw`順に並べると 2, 5, 5, 8, 10$` },
        { text: String.raw`表裏があるコインを3回投げる時、全て裏になる確率。`, ans: String.raw`$\frac{1}{8}$`, exp: String.raw`$1/2 \times 1/2 \times 1/2 = 1/8$` },
        { text: String.raw`サイコロを1回投げ、4以下の目が出る確率。`, ans: String.raw`$\frac{2}{3}$`, exp: String.raw`4通り。$4/6 = 2/3$` },
        { text: String.raw`1から5のカードから2枚引いて2桁を作る時、30以上の確率。`, ans: String.raw`$\frac{3}{5}$`, exp: String.raw`全20通り。30以上は12通り。$12/20 = 3/5$` },
        { text: String.raw`平均点60点の10人と50点の10人の全体の平均。`, ans: String.raw`$55$`, exp: String.raw`$(600+500)/20 = 55$` },
        { text: String.raw`当たり2本を含む5本から1本引いて当たる確率。`, ans: String.raw`$\frac{2}{5}$`, exp: String.raw`定義通り$2/5$` },
        { text: String.raw`1つのサイコロで偶数が出る確率。`, ans: String.raw`$\frac{1}{2}$`, exp: String.raw`2, 4, 6の3通り。$3/6 = 1/2$` }
    ],
    8: [
        { text: String.raw`$y=2x$で$x$変域が$1 \le x \le 3$の時の$y$の変域。`, ans: String.raw`$2 \le y \le 6$`, exp: String.raw`代入するだけ` },
        { text: String.raw`正八角形の1つの外角。`, ans: String.raw`$45^{\circ}$`, exp: String.raw`$360 \div 8 = 45$` },
        { text: String.raw`$y=x^2$で$x$変域が$-2 \le x \le 3$の時の$y$の変域。`, ans: String.raw`$0 \le y \le 9$`, exp: String.raw`$0$をまたぐので最小値は$0$` },
        { text: String.raw`三角形の内角が$50^{\circ}, 60^{\circ}$のとき残りの角。`, ans: String.raw`$70^{\circ}$`, exp: String.raw`$180 - (50+60) = 70$` },
        { text: String.raw`平行四辺形で隣り合う角が$x, 120^{\circ}$のときの$x$。`, ans: String.raw`$60^{\circ}$`, exp: String.raw`和が$180^{\circ}$になる` },
        { text: String.raw`五角形の内角の和。`, ans: String.raw`$540^{\circ}$`, exp: String.raw`$180 \times (5-2) = 540$` },
        { text: String.raw`$y=\frac{6}{x}$で$x=2$のときの$y$。`, ans: String.raw`$3$`, exp: String.raw`$6 \div 2 = 3$` },
        { text: String.raw`対頂角の性質：常に（　）。`, ans: String.raw`等しい`, exp: String.raw`対頂角は常に等しい` },
        { text: String.raw`二等辺三角形の底角は（　）。`, ans: String.raw`等しい`, exp: String.raw`性質より` },
        { text: String.raw`半径$3$の円の周の長さ。`, ans: String.raw`$6\pi$`, exp: String.raw`直径 $\times \pi$` }
    ],
    9: [
        { 
            text: String.raw`線分ABの垂直二等分線を作図せよ。`, 
            ans: String.raw`垂直二等分線`, 
            exp: String.raw`A,Bから等距離の円を描き、その交点を結ぶ。`,
            draw: (brd) => {
                let a = brd.create('point', [-2,0], {name:'A', fixed:true});
                let b = brd.create('point', [2,0], {name:'B', fixed:true});
                brd.create('segment', [a,b]);
                brd.create('line', [[0,-3],[0,3]], {dash:2, strokeColor:'gray'});
            }
        },
        { 
            text: String.raw`角BACの二等分線を作図せよ。`, 
            ans: String.raw`角の二等分線`, 
            exp: String.raw`Aから弧を描き、各辺との交点からさらに等距離の点を探す。`,
            draw: (brd) => {
                let a = brd.create('point', [0,0], {name:'A', fixed:true});
                brd.create('line', [a, [4,1]], {straightFirst:false, straightLast:false});
                brd.create('line', [a, [1,4]], {straightFirst:false, straightLast:false});
                brd.create('line', [a, [3,3]], {dash:2, strokeColor:'gray'});
            }
        }
    ]
};

function select(idx, btn) {
    currentIdx = idx;
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    loadProblem();
}

function loadProblem() {
    const list = database[currentIdx];
    if(!list) return;
    const q = list[Math.floor(Math.random() * list.length)];
    
    document.getElementById('prob-text').innerHTML = q.text;
    document.getElementById('ans').innerHTML = "正解：" + q.ans;
    document.getElementById('exp').innerHTML = "【解説】<br>" + q.exp;
    document.getElementById('ans-area').style.display = 'none';
    document.getElementById('show-btn').style.display = 'block';

    if(board) JXG.JSXGraph.freeBoard(board);
    const boxEl = document.getElementById('jxgbox');
    if(q.draw) {
        boxEl.style.display = 'block';
        board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-5,5,5,-5], axis:false, showCopyright:false, showNavigation:false});
        q.draw(board);
    } else { boxEl.style.display = 'none'; }
    
    MathJax.typesetPromise([document.getElementById('prob-text'), document.getElementById('ans-area')]);
}

function showAnswer() {
    document.getElementById('ans-area').style.display = 'block';
    document.getElementById('show-btn').style.display = 'none';
    MathJax.typesetPromise([document.getElementById('ans-area')]);
}
</script>
</body>
</html>
