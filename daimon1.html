<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大問1：小問集合メニュー</title>
    <script src="auth.js"></script>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px; background: #fdf6e3; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .q-btn { 
            padding: 15px; border-radius: 10px; border: none; background: white; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); font-weight: bold; cursor: pointer;
            display: flex; flex-direction: column; align-items: center;
        }
        .status { font-size: 0.7rem; margin-top: 5px; color: #666; }
        .unlocked { border-top: 5px solid #859900; }
        .locked { border-top: 5px solid #ccc; }
        .back-link { display: block; margin-bottom: 20px; text-decoration: none; color: #268bd2; font-weight: bold; }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← 全体メニューに戻る</a>
    <h1>大問1：小問集合</h1>
    <p>都立入試の46点分。確実に正解しましょう。</p>

    <div class="grid" id="menu-grid">
        </div>

    <script>
        const questions = [
            { n: "1", title: "正負・文字式", key: "daimon1_q1", file: "daimon1_1.html" },
            { n: "2", title: "平方根", key: "daimon1_q2", file: "daimon1_2.html" },
            { n: "3", title: "一次方程式", key: "daimon1_q3", file: "daimon1_3.html" },
            { n: "4", title: "連立方程式", key: "daimon1_q4", file: "daimon1_4.html" },
            { n: "5", title: "二次方程式", key: "daimon1_q5", file: "daimon1_5.html" },
            { n: "6", title: "関数(基本)", key: "daimon1_q6", file: "daimon1_6.html" },
            { n: "7", title: "角度・図形", key: "daimon1_q7", file: "daimon1_7.html" },
            { n: "8", title: "確率・統計", key: "daimon1_q8", file: "daimon1_8.html" },
            { n: "9", title: "作図", key: "daimon1_q9", file: "daimon1_9.html" }
        ];

        const grid = document.getElementById('menu-grid');
        questions.forEach(q => {
            const btn = document.createElement('button');
            btn.className = 'q-btn';
            btn.onclick = () => location.href = q.file;
            
            // 単品キー または 大問1フルパックキー('daimon1_all') のどちらかが有効なら解放
            const isUnlocked = AuthManager.isUnlocked(q.key);
            btn.classList.add(isUnlocked ? 'unlocked' : 'locked');
            
            btn.innerHTML = `
                <span>(${q.n}) ${q.title}</span>
                <span class="status">${isUnlocked ? "✅ 解放済み" : "お試し版"}</span>
            `;
            grid.appendChild(btn);
        });
    </script>
</body>
</html>
