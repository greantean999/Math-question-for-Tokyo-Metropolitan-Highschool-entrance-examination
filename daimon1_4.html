<!DOCTYPE html>
<html lang="ja">
<head>
    <script src="auth.js"></script>
    <meta charset="UTF-8">
    <title>都立数学特訓 - 大問1(4) 連立方程式</title>
    <script>window.MathJax = { tex: { inlineMath: [['$', '$']] } };</script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px; background: #fdf6e3; }
        .back-link { text-decoration: none; color: #268bd2; font-weight: bold; }
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; }
        .prob-text { font-size: 1.6rem; margin: 30px 0; min-height: 100px; color: #073642; line-height: 1.6; }
        .action-btn { width: 100%; padding: 15px; font-size: 18px; border-radius: 12px; border: none; background: #268bd2; color: white; cursor: pointer; font-weight: bold; margin-bottom: 10px; }
        .ans-box { display: none; margin-top: 20px; padding: 20px; background: #eee8d5; border-radius: 10px; border: 2px solid #268bd2; }
        .step { text-align: left; font-size: 0.9rem; color: #555; margin-top: 10px; }
    </style>
</head>
<body>

<a href="daimon1.html" class="back-link">← 大問1メニューへ</a>

<div class="card">
    <div id="prob-text" class="prob-text">読み込み中...</div>
    <button class="action-btn" onclick="showAnswer()">答えを表示</button>
    <button class="action-btn" style="background:#859900;" onclick="nextProblem()">次の問題</button>

    <div id="ans-area" class="ans-box">
        <div id="ans-text" style="font-size: 1.3rem; font-weight: bold; color: #d33682; margin-bottom: 10px;"></div>
        <div id="exp-text" class="step"></div>
    </div>
</div>

<script>
    const database = [
        { 
            q: String.raw`$\begin{cases} x + 2y = 7 \\ 2x - y = 4 \end{cases}$`, 
            a: String.raw`$x = 3, y = 2$`, 
            e: String.raw`下の式を2倍して $4x - 2y = 8$。上の式と足すと $5x = 15$ より $x = 3$。代入して $y = 2$。` 
        },
        { 
            q: String.raw`$\begin{cases} 3x + 2y = 10 \\ x + y = 4 \end{cases}$`, 
            a: String.raw`$x = 2, y = 2$`, 
            e: String.raw`下の式を2倍して $2x + 2y = 8$。上の式から引くと $x = 2$。代入して $y = 2$。` 
        },
        { 
            q: String.raw`$\begin{cases} y = 2x - 1 \\ 3x + 2y = 12 \end{cases}$`, 
            a: String.raw`$x = 2, y = 3$`, 
            e: String.raw`代入法で：$3x + 2(2x - 1) = 12$ <br> $3x + 4x - 2 = 12$ <br> $7x = 14$ より $x = 2, y = 3$。` 
        },
        { 
            q: String.raw`$\begin{cases} 4x + 3y = 1 \\ 2x + y = -1 \end{cases}$`, 
            a: String.raw`$x = -2, y = 3$`, 
            e: String.raw`下の式を3倍して $6x + 3y = -3$。上の式を引くと $2x = -4$ より $x = -2$。代入して $y = 3$。` 
        },
        { 
            q: String.raw`$\begin{cases} 3x - 4y = 10 \\ 2x + y = 3 \end{cases}$`, 
            a: String.raw`$x = 2, y = -1$`, 
            e: String.raw`下の式を4倍して $8x + 4y = 12$。上の式と足すと $11x = 22$ より $x = 2$。代入して $y = -1$。` 
        },
        { 
            q: String.raw`$\begin{cases} x = y + 5 \\ 3x + y = 7 \end{cases}$`, 
            a: String.raw`$x = 3, y = -2$`, 
            e: String.raw`代入法で：$3(y + 5) + y = 7$ <br> $3y + 15 + y = 7$ <br> $4y = -8$ より $y = -2, x = 3$。` 
        },
        { 
            q: String.raw`$\begin{cases} 5x + 2y = 11 \\ 2x + 3y = 0 \end{cases}$`, 
            a: String.raw`$x = 3, y = -2$`, 
            e: String.raw`上の式×3：$15x + 6y = 33$ <br> 下の式×2：$4x + 6y = 0$ <br> 引くと $11x = 33$ より $x = 3, y = -2$。` 
        },
        { 
            q: String.raw`$\begin{cases} 2x - 3y = 1 \\ 3x + 2y = 8 \end{cases}$`, 
            a: String.raw`$x = 2, y = 1$`, 
            e: String.raw`上の式×2：$4x - 6y = 2$ <br> 下の式×3：$9x + 6y = 24$ <br> 足すと $13x = 26$ より $x = 2, y = 1$。` 
        },
        { 
            q: String.raw`$\begin{cases} x + 3y = 1 \\ 2x + 5y = 0 \end{cases}$`, 
            a: String.raw`$x = -5, y = 2$`, 
            e: String.raw`上の式を2倍して $2x + 6y = 2$。下の式を引くと $y = 2$。代入して $x = -5$。` 
        },
        { 
            q: String.raw`$\begin{cases} 0.2x + 0.3y = 0.5 \\ x - 2y = 6 \end{cases}$`, 
            a: String.raw`$x = 4, y = -1$`, 
            e: String.raw`上の式を10倍して $2x + 3y = 5$。下の式を2倍して $2x - 4y = 12$。引くと $7y = -7$ より $y = -1, x = 4$。` 
        }
    ];

    let currentProb = null;

    function nextProblem() {
        const isUnlocked = AuthManager.isUnlocked('daimon1_q4');
        let qIndex = isUnlocked ? Math.floor(Math.random() * database.length) : 0;

        currentProb = database[qIndex];
        document.getElementById('prob-text').innerHTML = currentProb.q;
        document.getElementById('ans-area').style.display = 'none';
        if(window.MathJax) MathJax.typesetPromise();
    }

    function showAnswer() {
        document.getElementById('ans-text').innerHTML = currentProb.a;
        document.getElementById('exp-text').innerHTML = "【解説】<br>" + currentProb.e;
        document.getElementById('ans-area').style.display = 'block';
        if(window.MathJax) MathJax.typesetPromise();
    }

    window.onload = nextProblem;
</script>
</body>
</html>
