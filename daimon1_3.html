<!DOCTYPE html>
<html lang="ja">
<head>
    <script src="auth.js"></script>
    <meta charset="UTF-8">
    <title>都立数学特訓 - 大問1(3) 一次方程式</title>
    <script>window.MathJax = { tex: { inlineMath: [['$', '$']] } };</script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 20px; background: #fdf6e3; }
        .back-link { text-decoration: none; color: #268bd2; font-weight: bold; }
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; }
        .prob-text { font-size: 1.8rem; margin: 40px 0; min-height: 80px; color: #073642; line-height: 1.4; }
        .action-btn { width: 100%; padding: 15px; font-size: 18px; border-radius: 12px; border: none; background: #268bd2; color: white; cursor: pointer; font-weight: bold; margin-bottom: 10px; }
        .ans-box { display: none; margin-top: 20px; padding: 20px; background: #eee8d5; border-radius: 10px; border: 2px solid #268bd2; }
        .step { text-align: left; font-size: 0.9rem; color: #555; margin-top: 10px; }
    </style>
</head>
<body>

<a href="daimon1.html" class="back-link">← 大問1メニューへ</a>

<div class="card">
    <div id="prob-text" class="prob-text">読み込み中...</div>
    <button class="action-btn" onclick="showAnswer()">答えを表示</button>
    <button class="action-btn" style="background:#859900;" onclick="nextProblem()">次の問題</button>

    <div id="ans-area" class="ans-box">
        <div id="ans-text" style="font-size: 1.5rem; font-weight: bold; color: #d33682; margin-bottom: 10px;"></div>
        <div id="exp-text" class="step"></div>
    </div>
</div>

<script>
    const database = [
        { q: String.raw`$9x - 4 = 5(x + 4)$`, a: String.raw`$x = 6$`, e: String.raw`$9x - 4 = 5x + 20$<br>$4x = 24$<br>$x = 6$` },
        { q: String.raw`$x + 7 = 3(x + 1)$`, a: String.raw`$x = 2$`, e: String.raw`$x + 7 = 3x + 3$<br>$-2x = -4$<br>$x = 2$` },
        { q: String.raw`$\frac{x + 5}{4} = \frac{2x - 1}{3}$`, a: String.raw`$x = 3.8$ (または $\frac{19}{5}$)`, e: String.raw`両辺を12倍して：<br>$3(x + 5) = 4(2x - 1)$<br>$3x + 15 = 8x - 4$<br>$-5x = -19$<br>$x = \frac{19}{5}$` },
        { q: String.raw`$0.1x + 0.4 = 0.2x - 0.5$`, a: String.raw`$x = 9$`, e: String.raw`両辺を10倍して：<br>$x + 4 = 2x - 5$<br>$-x = -9$<br>$x = 9$` },
        { q: String.raw`$\frac{x-1}{2} - \frac{x+2}{3} = 1$`, a: String.raw`$x = 13$`, e: String.raw`両辺を6倍して：<br>$3(x - 1) - 2(x + 2) = 6$<br>$3x - 3 - 2x - 4 = 6$<br>$x - 7 = 6$<br>$x = 13$` },
        { q: String.raw`$4x - 7 = x + 8$`, a: String.raw`$x = 5$`, e: String.raw`$3x = 15$<br>$x = 5$` },
        { q: String.raw`$2(3x - 1) = 4x + 10$`, a: String.raw`$x = 6$`, e: String.raw`$6x - 2 = 4x + 10$<br>$2x = 12$<br>$x = 6$` },
        { q: String.raw`$x - \frac{x-3}{2} = 4$`, a: String.raw`$x = 5$`, e: String.raw`両辺を2倍して：<br>$2x - (x - 3) = 8$<br>$2x - x + 3 = 8$<br>$x = 5$` },
        { q: String.raw`$7x + 3 = 9x - 5$`, a: String.raw`$x = 4$`, e: String.raw`$-2x = -8$<br>$x = 4$` },
        { q: String.raw`$3(2x + 1) - 5 = x + 3$`, a: String.raw`$x = 1$`, e: String.raw`$6x + 3 - 5 = x + 3$<br>$5x = 5$<br>$x = 1$` }
    ];

    let currentProb = null;

    function nextProblem() {
        const isUnlocked = AuthManager.isUnlocked('daimon1_q3');
        let qIndex = isUnlocked ? Math.floor(Math.random() * database.length) : 0;

        currentProb = database[qIndex];
        document.getElementById('prob-text').innerHTML = currentProb.q;
        document.getElementById('ans-area').style.display = 'none';
        if(window.MathJax) MathJax.typesetPromise();
    }

    function showAnswer() {
        document.getElementById('ans-text').innerHTML = currentProb.a;
        document.getElementById('exp-text').innerHTML = "【解説】<br>" + currentProb.e;
        document.getElementById('ans-area').style.display = 'block';
        if(window.MathJax) MathJax.typesetPromise();
    }

    window.onload = nextProblem;
</script>
</body>
</html>
